[gd_scene load_steps=58 format=3 uid="uid://cvinojykw1akk"]

[ext_resource type="Script" uid="uid://dm6ow4xxakyap" path="res://scenes/Agentv2/agent_v_2.gd" id="1_3fu0x"]
[ext_resource type="Texture2D" uid="uid://dwifxpmr2i0h2" path="res://assets/Modern_Interiors_Free_v2.2/Modern tiles_Free/Characters_free/Bob_idle_anim_16x16.png" id="2_xqdgn"]
[ext_resource type="Texture2D" uid="uid://5dqt0l7ejfpy" path="res://assets/Modern_Interiors_Free_v2.2/Modern tiles_Free/Characters_free/Bob_run_16x16.png" id="3_2krod"]
[ext_resource type="PackedScene" uid="uid://dui2l08xih2aa" path="res://scenes/Components/pathfinding_component.tscn" id="4_uwfto"]
[ext_resource type="PackedScene" uid="uid://dh6fjvy7x6bns" path="res://scenes/Components/random_vector_on_navigation_layer_component.tscn" id="5_nsq65"]
[ext_resource type="PackedScene" uid="uid://cf37v4t5636x7" path="res://scenes/Components/walking_animation_component.tscn" id="6_xqdgn"]
[ext_resource type="PackedScene" uid="uid://b5g4betym4jw2" path="res://scenes/Components/agent_action_list_component.tscn" id="7_2krod"]

[sub_resource type="AtlasTexture" id="AtlasTexture_a0e6s"]
atlas = ExtResource("2_xqdgn")
region = Rect2(288, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_gwmsk"]
atlas = ExtResource("2_xqdgn")
region = Rect2(304, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_i2t6t"]
atlas = ExtResource("2_xqdgn")
region = Rect2(320, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_6gl5l"]
atlas = ExtResource("2_xqdgn")
region = Rect2(336, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_c7lqd"]
atlas = ExtResource("2_xqdgn")
region = Rect2(352, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_hh11m"]
atlas = ExtResource("2_xqdgn")
region = Rect2(368, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_m3chr"]
atlas = ExtResource("2_xqdgn")
region = Rect2(192, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_b2okk"]
atlas = ExtResource("2_xqdgn")
region = Rect2(208, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_agca3"]
atlas = ExtResource("2_xqdgn")
region = Rect2(224, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_em2g7"]
atlas = ExtResource("2_xqdgn")
region = Rect2(240, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_3rup0"]
atlas = ExtResource("2_xqdgn")
region = Rect2(256, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_d1kxw"]
atlas = ExtResource("2_xqdgn")
region = Rect2(272, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_agvyp"]
atlas = ExtResource("2_xqdgn")
region = Rect2(0, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_bc18i"]
atlas = ExtResource("2_xqdgn")
region = Rect2(16, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_fgfjf"]
atlas = ExtResource("2_xqdgn")
region = Rect2(32, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_k2tnk"]
atlas = ExtResource("2_xqdgn")
region = Rect2(48, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_ll5yh"]
atlas = ExtResource("2_xqdgn")
region = Rect2(64, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_sq707"]
atlas = ExtResource("2_xqdgn")
region = Rect2(80, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_bcija"]
atlas = ExtResource("2_xqdgn")
region = Rect2(96, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_8ktpx"]
atlas = ExtResource("2_xqdgn")
region = Rect2(112, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_s4aav"]
atlas = ExtResource("2_xqdgn")
region = Rect2(128, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_nucdh"]
atlas = ExtResource("2_xqdgn")
region = Rect2(144, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_e61ux"]
atlas = ExtResource("2_xqdgn")
region = Rect2(160, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_wgdc6"]
atlas = ExtResource("2_xqdgn")
region = Rect2(176, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_bms5q"]
atlas = ExtResource("3_2krod")
region = Rect2(288, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_8dfii"]
atlas = ExtResource("3_2krod")
region = Rect2(304, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_ehban"]
atlas = ExtResource("3_2krod")
region = Rect2(320, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_0v4fh"]
atlas = ExtResource("3_2krod")
region = Rect2(336, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_fqd24"]
atlas = ExtResource("3_2krod")
region = Rect2(352, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_qngex"]
atlas = ExtResource("3_2krod")
region = Rect2(368, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_tctme"]
atlas = ExtResource("3_2krod")
region = Rect2(192, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_sfo6a"]
atlas = ExtResource("3_2krod")
region = Rect2(208, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_aw6bb"]
atlas = ExtResource("3_2krod")
region = Rect2(224, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_cq7jf"]
atlas = ExtResource("3_2krod")
region = Rect2(240, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_f4fxu"]
atlas = ExtResource("3_2krod")
region = Rect2(256, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_nsq65"]
atlas = ExtResource("3_2krod")
region = Rect2(0, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_xqdgn"]
atlas = ExtResource("3_2krod")
region = Rect2(16, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_2krod"]
atlas = ExtResource("3_2krod")
region = Rect2(32, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_iwm7j"]
atlas = ExtResource("3_2krod")
region = Rect2(48, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_7hiua"]
atlas = ExtResource("3_2krod")
region = Rect2(64, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_km3bh"]
atlas = ExtResource("3_2krod")
region = Rect2(80, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_a1nyw"]
atlas = ExtResource("3_2krod")
region = Rect2(96, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_rhxv8"]
atlas = ExtResource("3_2krod")
region = Rect2(112, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_ptf6k"]
atlas = ExtResource("3_2krod")
region = Rect2(128, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_ur2k4"]
atlas = ExtResource("3_2krod")
region = Rect2(144, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_rblbf"]
atlas = ExtResource("3_2krod")
region = Rect2(160, 8, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_bfo1h"]
atlas = ExtResource("3_2krod")
region = Rect2(176, 8, 16, 24)

[sub_resource type="SpriteFrames" id="SpriteFrames_uwfto"]
animations = [{
"frames": [],
"loop": true,
"name": &"default",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_a0e6s")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gwmsk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_i2t6t")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6gl5l")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_c7lqd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hh11m")
}],
"loop": true,
"name": &"idle_down",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_m3chr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_b2okk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_agca3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_em2g7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3rup0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_d1kxw")
}],
"loop": true,
"name": &"idle_left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_agvyp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bc18i")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fgfjf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_k2tnk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ll5yh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sq707")
}],
"loop": true,
"name": &"idle_right",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_bcija")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8ktpx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_s4aav")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nucdh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_e61ux")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wgdc6")
}],
"loop": true,
"name": &"idle_up",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_bms5q")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8dfii")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ehban")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0v4fh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fqd24")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qngex")
}],
"loop": true,
"name": &"walk_down",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_tctme")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sfo6a")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_aw6bb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cq7jf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_f4fxu")
}],
"loop": true,
"name": &"walk_left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_nsq65")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xqdgn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2krod")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_iwm7j")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7hiua")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_km3bh")
}],
"loop": true,
"name": &"walk_right",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_a1nyw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rhxv8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ptf6k")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ur2k4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rblbf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bfo1h")
}],
"loop": true,
"name": &"walk_up",
"speed": 5.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_nsq65"]
radius = 7.67231

[sub_resource type="CircleShape2D" id="CircleShape2D_4p1vs"]

[node name="AgentV2" type="CharacterBody2D" node_paths=PackedStringArray("movementAnimation", "pathfindingComponent", "randomVectorOnNavigationLayer", "agentActions") groups=["Agent"]]
script = ExtResource("1_3fu0x")
movementAnimation = NodePath("WalkingAnimationComponent")
pathfindingComponent = NodePath("PathfindingComponent")
randomVectorOnNavigationLayer = NodePath("RandomVectorOnNavigationLayerComponent")
agentActions = NodePath("AgentActionListComponent")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = SubResource("SpriteFrames_uwfto")
animation = &"walk_up"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0.749999, 0.75)
scale = Vector2(0.95, 0.95)
shape = SubResource("CircleShape2D_nsq65")

[node name="InteractArea" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="InteractArea"]
scale = Vector2(1.3, 1.3)
shape = SubResource("CircleShape2D_4p1vs")

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="."]
path_desired_distance = 1.0
path_max_distance = 10.0
path_postprocessing = 1
radius = 5.0
debug_enabled = true

[node name="PathfindingComponent" parent="." node_paths=PackedStringArray("navigationNode") instance=ExtResource("4_uwfto")]
navigationNode = NodePath("../NavigationAgent2D")

[node name="RandomVectorOnNavigationLayerComponent" parent="." instance=ExtResource("5_nsq65")]

[node name="WalkingAnimationComponent" parent="." node_paths=PackedStringArray("animated_sprite") instance=ExtResource("6_xqdgn")]
animated_sprite = NodePath("../AnimatedSprite2D")

[node name="AgentActionListComponent" parent="." instance=ExtResource("7_2krod")]

[connection signal="area_entered" from="InteractArea" to="." method="_on_interact_area_area_entered"]
[connection signal="area_exited" from="InteractArea" to="." method="_on_interact_area_area_exited"]
[connection signal="target_reached" from="PathfindingComponent" to="." method="_on_pathfinding_component_target_reached"]
